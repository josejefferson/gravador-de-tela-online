Stopwatch=function(t,i,s){this.startTime=0,this.stopTime=0,this.totalElapsed=0,this.started=!1,this.listener=null!=t?t:null,this.countUp=void 0===s||s,this.tickResolution=null!=i?i:500,this.tickInterval=null,this.onehour=36e5,this.onemin=6e4,this.onesec=1e3},Stopwatch.prototype.start=function(){var t,i;this.started||(this.startTime=(new Date).getTime(),this.stopTime=0,this.started=!0,this.tickInterval=setInterval((t=this,i=this.onTick,function(){return i.call(t)}),this.tickResolution))},Stopwatch.prototype.stop=function(){if(this.started){this.stopTime=(new Date).getTime(),this.started=!1;var t=this.stopTime-this.startTime;this.totalElapsed+=t,null!=this.tickInterval&&clearInterval(this.tickInterval)}return this.getElapsed()},Stopwatch.prototype.reset=function(){if(this.totalElapsed=0,this.startTime=(new Date).getTime(),this.stopTime=this.startTime,this.countUp||(this.totalElapsed=this.initialElapsed),null!=this.tickInterval){clearInterval(this.tickInterval),this.tickInterval=setInterval((t=this,i=this.onTick,function(){return i.call(t)}),this.tickResolution)}var t,i},Stopwatch.prototype.restart=function(){this.stop(),this.reset(),this.start()},Stopwatch.prototype.getElapsed=function(){var t=0;this.started&&(t=(new Date).getTime()-this.startTime),t+=this.totalElapsed,this.countUp||(t=Math.max(2*this.initialElapsed-t,0));var i=parseInt(t/this.onehour);t%=this.onehour;var s=parseInt(t/this.onemin);return t%=this.onemin,{hours:i,minutes:s,seconds:parseInt(t/this.onesec),milliseconds:t%this.onesec}},Stopwatch.prototype.setElapsed=function(t,i,s){if(this.totalElapsed=0,this.startTime=(new Date).getTime(),this.stopTime=this.startTime,this.totalElapsed+=t*this.onehour,this.totalElapsed+=i*this.onemin,this.totalElapsed+=this.countUp?s*this.onesec:(s+1)*this.onesec-1,this.totalElapsed=Math.max(this.totalElapsed,0),this.initialElapsed=this.totalElapsed,null!=this.tickInterval){clearInterval(this.tickInterval),this.tickInterval=setInterval((e=this,n=this.onTick,function(){return n.call(e)}),this.tickResolution)}var e,n},Stopwatch.prototype.toString=function(t){t=t||!1;var i=function(t,i){for(t=t.toString();t.length<i;)t="0"+t;return t},s=this.getElapsed();return i(s.hours,2)+":"+i(s.minutes,2)+":"+i(s.seconds,2)+(t?"."+i(s.milliseconds,3):"")},Stopwatch.prototype.setListener=function(t){this.listener=t},Stopwatch.prototype.onTick=function(){null!=this.listener&&this.listener(this)};